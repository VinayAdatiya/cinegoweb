<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Create Movie</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        .cast-row {
            margin-bottom: 10px;
        }

        input[type="range"] {
            width: 300px;
        }

        #ratingValue {
            font-weight: bold;
            margin-left: 10px;
        }

        .checkbox-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .checkbox-group label {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        #formMessage {
            margin-top: 1rem;
            font-weight: bold;
            color: red;
        }
    </style>
</head>
<body>
<div id="formMessage" class="text-center mt-3" style="display:none;"></div>
<h2>Create Movie</h2>
<form id="movieForm">
    <label>Movie Title: </label>
    <input type="text" name="movieTitle"><br><br>

    <label>Movie Rating: </label>
    <input type="range" id="rating" name="rating" min="0" max="10" step="0.1" value="5">
    <span id="ratingValue">5.0</span>/10<br><br>

    <label>Movie Duration:</label>
    <select id="hours">
        <option value="1">1 hr</option>
        <option value="2">2 hr</option>
        <option value="3">3 hr</option>
        <option value="4">4 hr</option>
    </select>

    <select id="minutes">
        <option value="0">00 min</option>
        <option value="5">05 min</option>
        <option value="10">10 min</option>
        <option value="15">15 min</option>
        <option value="20">20 min</option>
        <option value="30">30 min</option>
        <option value="40">40 min</option>
        <option value="50">50 min</option>
    </select>

    <select id="seconds">
        <option value="0">00 sec</option>
        <option value="15">15 sec</option>
        <option value="30">30 sec</option>
        <option value="45">45 sec</option>
    </select><br><br>

    <label>Release Date:</label>
    <input type="date" name="releaseDate" id="releaseDate"><br><br>

    <label>Movie Description: </label>
    <input type="text" name="movieDescription" maxlength="200"><br><br>

    <label>Movie Poster: </label>
    <input type="text" name="moviePoster"><br><br>

    <label>Languages: </label>
    <div id="language-container" class="checkbox-group"></div>
    <br>

    <label>Genres: </label>
    <div id="genre-container" class="checkbox-group"></div>
    <br>

    <label>Formats: </label>
    <div id="format-container" class="checkbox-group"></div>
    <br>

    <label>Add Cast:</label>
    <button type="button" id="addCastBtn">+ Add Cast</button>

    <div id="castContainer"></div>

    <br>
    <button type="submit">Submit</button>
</form>
<script src="../config.js"></script>
<script src="../common.js"></script>
<script src="movie-handler.js"></script>
<script>
    document.addEventListener('movieAddedSuccessfully', () => {
        console.log('movieAddedSuccessfully event received');
        window.parent.postMessage({type: 'movieAdded'}, '*');
        console.log('movieAdded message sent to parent');
    });

</script>
</body>
</html>